<?php

namespace App\Controllers;

use App\Core\AControllerBase;
use App\Core\Responses\Response;
use App\Models\Authorization;
use App\Models\Picture;
use App\Models\User;

class ProfileController extends AControllerBase
{

    public function authorize(string $action)
    {
        switch ($action) {

            case "index":
            case "changePicture";
            case "change": {
                if ($this->app->getAuth()->isLogged()) {
                            return true;
                }

            }
            default: { return false; }

        }
    }

    public function index(): Response
    {

        $user = User::getOne($this->app->getAuth()->getLoggedUserId());
        $pictures = Picture::getAll();
        $code = '';

        foreach ($pictures as $picture) {
            if ($picture->getUserId() == $user->getId()) {
                $code = $picture->getCode();
            }
        }
        //$pic = 'iVBORw0KGgoAAAANSUhEUgAAAOQAAACwCAYAAAAfSMJsAAAAxHpUWHRSYXcgcHJvZmlsZSB0eXBlIGV4aWYAAHjabVBRDsMgCP3nFDsCAlo8jm1dshvs+EOhS9v0JT7wYR4I9O/nDa8BSgKSFy21FDRIlUrNEkVHm5xQJk90iVq66rCGjmQSW2S/aon3h57+Bh6aZflkpFsU1muhRmfSm1E04jERWbKHUQ0jJi+kMGj+LSxVl/MX1o5XqB8YtPXpjSm63e+y2Pb2bCITdTbZmLn4ADyOALeZDFZyuXFmcT0msYU87ekA/ADR5FozfcYq1wAAAYRpQ0NQSUNDIHByb2ZpbGUAAHicfZE9SMNAHMVfU8UiFQU7iDhkaJ0sgoo4lioWwUJpK7TqYHLpFzRpSFJcHAXXgoMfi1UHF2ddHVwFQfADxNnBSdFFSvxfUmgR48FxP97de9y9A4RmlalmTwxQNctIJ+JiLr8q9r1CQABDiGBSYqaezCxm4Tm+7uHj612UZ3mf+3MMKAWTAT6ROMZ0wyLeIJ7dtHTO+8QhVpYU4nPiCYMuSPzIddnlN84lhwWeGTKy6XniELFY6mK5i1nZUIlniMOKqlG+kHNZ4bzFWa3WWfue/IXBgraS4TrNMSSwhCRSECGjjgqqsBClVSPFRJr24x7+UcefIpdMrgoYORZQgwrJ8YP/we9uzeL0lJsUjAO9L7b9EQH6doFWw7a/j227dQL4n4ErreOvNYG5T9IbHS18BAxuAxfXHU3eAy53gJEnXTIkR/LTFIpF4P2MvikPDN8C/Wtub+19nD4AWepq+QY4OATGS5S97vHuQHdv/55p9/cD0DxyzLMC5j8AAA12aVRYdFhNTDpjb20uYWRvYmUueG1wAAAAAAA8P3hwYWNrZXQgYmVnaW49Iu+7vyIgaWQ9Ilc1TTBNcENlaGlIenJlU3pOVGN6a2M5ZCI/Pgo8eDp4bXBtZXRhIHhtbG5zOng9ImFkb2JlOm5zOm1ldGEvIiB4OnhtcHRrPSJYTVAgQ29yZSA0LjQuMC1FeGl2MiI+CiA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPgogIDxyZGY6RGVzY3JpcHRpb24gcmRmOmFib3V0PSIiCiAgICB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIKICAgIHhtbG5zOnN0RXZ0PSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VFdmVudCMiCiAgICB4bWxuczpkYz0iaHR0cDovL3B1cmwub3JnL2RjL2VsZW1lbnRzLzEuMS8iCiAgICB4bWxuczpHSU1QPSJodHRwOi8vd3d3LmdpbXAub3JnL3htcC8iCiAgICB4bWxuczp0aWZmPSJodHRwOi8vbnMuYWRvYmUuY29tL3RpZmYvMS4wLyIKICAgIHhtbG5zOnhtcD0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wLyIKICAgeG1wTU06RG9jdW1lbnRJRD0iZ2ltcDpkb2NpZDpnaW1wOjVlODhiNGE2LTRkYjEtNDE3Mi1iYTgwLWNlOWIyNjA5YTVlMyIKICAgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDowMWRkNzIyMi1hZjMwLTQ2ODktOTU5NS1iNGUwNDY0OTg2YjUiCiAgIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDplMDU0NjQ4Ni0zYjA5LTQzYTAtYjYxZS1lYTRkODU0ZGRlZGEiCiAgIGRjOkZvcm1hdD0iaW1hZ2UvcG5nIgogICBHSU1QOkFQST0iMi4wIgogICBHSU1QOlBsYXRmb3JtPSJXaW5kb3dzIgogICBHSU1QOlRpbWVTdGFtcD0iMTcwNzQyMjA0NDYxNTQ2OSIKICAgR0lNUDpWZXJzaW9uPSIyLjEwLjM2IgogICB0aWZmOk9yaWVudGF0aW9uPSIxIgogICB4bXA6Q3JlYXRvclRvb2w9IkdJTVAgMi4xMCIKICAgeG1wOk1ldGFkYXRhRGF0ZT0iMjAyNDowMjowOFQyMDo1NDowMiswMTowMCIKICAgeG1wOk1vZGlmeURhdGU9IjIwMjQ6MDI6MDhUMjA6NTQ6MDIrMDE6MDAiPgogICA8eG1wTU06SGlzdG9yeT4KICAgIDxyZGY6U2VxPgogICAgIDxyZGY6bGkKICAgICAgc3RFdnQ6YWN0aW9uPSJzYXZlZCIKICAgICAgc3RFdnQ6Y2hhbmdlZD0iLyIKICAgICAgc3RFdnQ6aW5zdGFuY2VJRD0ieG1wLmlpZDowNDQ5NzM3Ni1kNzRjLTQxODEtYTYzNy0yZDhjYjgxOTMwZmUiCiAgICAgIHN0RXZ0OnNvZnR3YXJlQWdlbnQ9IkdpbXAgMi4xMCAoV2luZG93cykiCiAgICAgIHN0RXZ0OndoZW49IjIwMjQtMDItMDhUMjA6NTQ6MDQiLz4KICAgIDwvcmRmOlNlcT4KICAgPC94bXBNTTpIaXN0b3J5PgogIDwvcmRmOkRlc2NyaXB0aW9uPgogPC9yZGY6UkRGPgo8L3g6eG1wbWV0YT4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgIAo8P3hwYWNrZXQgZW5kPSJ3Ij8+tMJCpgAAAAZiS0dEAP8A/wD/oL2nkwAAAAlwSFlzAAAOwwAADsMBx2+oZAAAAAd0SU1FB+gCCBM2BBmmAIUAABOGSURBVHja7Z15lBzVdYe/mp6VkTSIVQLJLBJCZYHNYlZjS8FhCUscLFYDJobYcTDGW+xDvATbMcEsB8ucBAwJcbDBKBBEBCEEhNkMJAERAbKpEIKRBFgItDFaRpqt8se9FTVKL9Xr9PT8vnPqjJCY7qrX99f3vXvfuxeEEEIIIYQQQgghhBBCCCGEEEIIIYQQQgghhBBCCCGEEEIIIYQQQgghhBBCCCGEEEIIIYQQQgghhBBCCCGEEEIIIYQQQgghhBBCCCGEEEIIIYQQQgghhBBCCCGEEEIIIYQQQgghhBBCCCGEEEIIIcYagYag8YgjdgV2B/YAJgG7ATsDPcAE/9kD7OC/0gV05nipTUC//7kXWA+sy/q5DlgOrABWBCHrNfoS5FgV3Xjgg8CBwPSsaxrQMUK31esC/RXwPLAEeD4IeUefmATZbALcCzge+B3gUBdf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';
        $code = base64_decode($code);
        //$code = 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAOQAAACwCAYAAAAfSMJsAAAAxHpUWHRSYXcgcHJvZmlsZSB0eXBlIGV4aWYAAHjabVBRDsMgCP3nFDsCAlo8jm1dshvs+EOhS9v0JT7wYR4I9O/nDa8BSgKSFy21FDRIlUrNEkVHm5xQJk90iVq66rCGjmQSW2S/aon3h57+Bh6aZflkpFsU1muhRmfSm1E04jERWbKHUQ0jJi+kMGj+LSxVl/MX1o5XqB8YtPXpjSm63e+y2Pb2bCITdTbZmLn4ADyOALeZDFZyuXFmcT0msYU87ekA/ADR5FozfcYq1wAAAYRpQ0NQSUNDIHByb2ZpbGUAAHicfZE9SMNAHMVfU8UiFQU7iDhkaJ0sgoo4lioWwUJpK7TqYHLpFzRpSFJcHAXXgoMfi1UHF2ddHVwFQfADxNnBSdFFSvxfUmgR48FxP97de9y9A4RmlalmTwxQNctIJ+JiLr8q9r1CQABDiGBSYqaezCxm4Tm+7uHj612UZ3mf+3MMKAWTAT6ROMZ0wyLeIJ7dtHTO+8QhVpYU4nPiCYMuSPzIddnlN84lhwWeGTKy6XniELFY6mK5i1nZUIlniMOKqlG+kHNZ4bzFWa3WWfue/IXBgraS4TrNMSSwhCRSECGjjgqqsBClVSPFRJr24x7+UcefIpdMrgoYORZQgwrJ8YP/we9uzeL0lJsUjAO9L7b9EQH6doFWw7a/j227dQL4n4ErreOvNYG5T9IbHS18BAxuAxfXHU3eAy53gJEnXTIkR/LTFIpF4P2MvikPDN8C/Wtub+19nD4AWepq+QY4OATGS5S97vHuQHdv/55p9/cD0DxyzLMC5j8AAA12aVRYdFhNTDpjb20uYWRvYmUueG1wAAAAAAA8P3hwYWNrZXQgYmVnaW49Iu+7vyIgaWQ9Ilc1TTBNcENlaGlIenJlU3pOVGN6a2M5ZCI/Pgo8eDp4bXBtZXRhIHhtbG5zOng9ImFkb2JlOm5zOm1ldGEvIiB4OnhtcHRrPSJYTVAgQ29yZSA0LjQuMC1FeGl2MiI+CiA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPgogIDxyZGY6RGVzY3JpcHRpb24gcmRmOmFib3V0PSIiCiAgICB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIKICAgIHhtbG5zOnN0RXZ0PSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VFdmVudCMiCiAgICB4bWxuczpkYz0iaHR0cDovL3B1cmwub3JnL2RjL2VsZW1lbnRzLzEuMS8iCiAgICB4bWxuczpHSU1QPSJodHRwOi8vd3d3LmdpbXAub3JnL3htcC8iCiAgICB4bWxuczp0aWZmPSJodHRwOi8vbnMuYWRvYmUuY29tL3RpZmYvMS4wLyIKICAgIHhtbG5zOnhtcD0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wLyIKICAgeG1wTU06RG9jdW1lbnRJRD0iZ2ltcDpkb2NpZDpnaW1wOjVlODhiNGE2LTRkYjEtNDE3Mi1iYTgwLWNlOWIyNjA5YTVlMyIKICAgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDowMWRkNzIyMi1hZjMwLTQ2ODktOTU5NS1iNGUwNDY0OTg2YjUiCiAgIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDplMDU0NjQ4Ni0zYjA5LTQzYTAtYjYxZS1lYTRkODU0ZGRlZGEiCiAgIGRjOkZvcm1hdD0iaW1hZ2UvcG5nIgogICBHSU1QOkFQST0iMi4wIgogICBHSU1QOlBsYXRmb3JtPSJXaW5kb3dzIgogICBHSU1QOlRpbWVTdGFtcD0iMTcwNzQyMjA0NDYxNTQ2OSIKICAgR0lNUDpWZXJzaW9uPSIyLjEwLjM2IgogICB0aWZmOk9yaWVudGF0aW9uPSIxIgogICB4bXA6Q3JlYXRvclRvb2w9IkdJTVAgMi4xMCIKICAgeG1wOk1ldGFkYXRhRGF0ZT0iMjAyNDowMjowOFQyMDo1NDowMiswMTowMCIKICAgeG1wOk1vZGlmeURhdGU9IjIwMjQ6MDI6MDhUMjA6NTQ6MDIrMDE6MDAiPgogICA8eG1wTU06SGlzdG9yeT4KICAgIDxyZGY6U2VxPgogICAgIDxyZGY6bGkKICAgICAgc3RFdnQ6YWN0aW9uPSJzYXZlZCIKICAgICAgc3RFdnQ6Y2hhbmdlZD0iLyIKICAgICAgc3RFdnQ6aW5zdGFuY2VJRD0ieG1wLmlpZDowNDQ5NzM3Ni1kNzRjLTQxODEtYTYzNy0yZDhjYjgxOTMwZmUiCiAgICAgIHN0RXZ0OnNvZnR3YXJlQWdlbnQ9IkdpbXAgMi4xMCAoV2luZG93cykiCiAgICAgIHN0RXZ0OndoZW49IjIwMjQtMDItMDhUMjA6NTQ6MDQiLz4KICAgIDwvcmRmOlNlcT4KICAgPC94bXBNTTpIaXN0b3J5PgogIDwvcmRmOkRlc2NyaXB0aW9uPgogPC9yZGY6UkRGPgo8L3g6eG1wbWV0YT4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgIAo8P3hwYWNrZXQgZW5kPSJ3Ij8+tMJCpgAAAAZiS0dEAP8A/wD/oL2nkwAAAAlwSFlzAAAOwwAADsMBx2+oZAAAAAd0SU1FB+gCCBM2BBmmAIUAABOGSURBVHja7Z15lBzVdYe/mp6VkTSIVQLJLBJCZYHNYlZjS8FhCUscLFYDJobYcTDGW+xDvATbMcEsB8ucBAwJcbDBKBBEBCEEhNkMJAERAbKpEIKRBFgItDFaRpqt8se9FTVKL9Xr9PT8vnPqjJCY7qrX99f3vXvfuxeEEEIIIYQQQgghhBBCCCGEEEIIIYQQQgghhBBCCCGEEEIIIYQQQgghhBBCCCGEEEIIIYQQQgghhBBCCCGEEEIIIYQQQgghhBBCCCGEEEIIIYQQQgghhBBCCCGEEEIIIYQQQgghhBBCCCGEEEIIIcYagYag8YgjdgV2B/YAJgG7ATsDPcAE/9kD7OC/0gV05nipTUC//7kXWA+sy/q5DlgOrABWBCHrNfoS5FgV3Xjgg8CBwPSsaxrQMUK31esC/RXwPLAEeD4IeUefmATZbALcCzge+B3gUBdf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â€¦';
        if ($code != '') {
            $code = 'data:image/jpeg;base64,' . base64_encode($code);
        }

            $data = [
            "name" => $user->getNameFirst() . ' ' . $user->getNameSecond(),
            "email" => $user->getEmail(),
            "id" => $user->getId(),
            "picture" => $code,
        ];

        return $this->html($data);
    }

    public function change(): Response
    {

        return $this->html();

    }

    public function changePicture(): \App\Core\Responses\JsonResponse
    {

        $data = $this->request()->getRawBodyJSON();
        $pic = $data->src;

        $base64_string_clean = preg_replace('/^data:image\/\w+;base64,/', '', $pic);

        $pictures = Picture::getAll();
        $profile_pic = null;

        foreach ($pictures as $picture) {
            if ($picture->getUserId() == $this->app->getAuth()->getLoggedUserId()) {
                $profile_pic = $picture;
            }
        }

        if ($profile_pic != null) {
            $profile_pic->setCode($base64_string_clean);
            $profile_pic->save();
            return $this->json('true');
        }

        return $this->json('false');

    }
}